<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Scraper Agent | Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top left, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chat-container {
            height: calc(100vh - 200px);
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-soft {
            animation: pulse-soft 2s infinite;
        }
    </style>
</head>
<body class="text-gray-100 flex items-center justify-center p-4 overflow-hidden">

    <!-- Landing Page Background Content -->
    <div id="landing-content" class="text-center">
        <h1 class="text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
            Analise sites com IA
        </h1>
        <p class="text-gray-400 text-lg mb-8">Transforme qualquer URL em conhecimento conversacional em segundos.</p>
        <button onclick="openModal()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg flex items-center gap-2 mx-auto">
            <i data-lucide="zap"></i> Começar Agora
        </button>
    </div>

    <!-- Modal de URL -->
    <div id="url-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden bg-black/60 backdrop-blur-sm">
        <div class="glass w-full max-w-md p-8 rounded-3xl shadow-2xl transform transition-all scale-95 opacity-0 duration-300" id="modal-container">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold flex items-center gap-2">
                    <i data-lucide="link" class="text-blue-400"></i> Analisar URL
                </h2>
                <button onclick="closeModal()" class="text-gray-400 hover:text-white">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <p class="text-gray-400 mb-6 text-sm">Insira o link do site que você deseja que o nosso agente analise para você.</p>
            
            <div class="space-y-4">
                <div class="relative">
                    <input type="url" id="url-input" placeholder="https://exemplo.com.br" 
                        class="w-full bg-black/40 border border-gray-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-gray-200">
                </div>
                <button onclick="startScraping()" id="submit-btn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 py-3 rounded-xl font-bold hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                    Processar Site
                </button>
            </div>
        </div>
    </div>

    <!-- Interface de Carregamento (Scraping) -->
    <div id="loading-screen" class="hidden fixed inset-0 z-[60] flex flex-col items-center justify-center bg-slate-950">
        <div class="relative w-24 h-24 mb-6">
            <div class="absolute inset-0 border-4 border-blue-500/20 rounded-full"></div>
            <div class="absolute inset-0 border-4 border-t-blue-500 rounded-full animate-spin"></div>
            <i data-lucide="search" class="absolute inset-0 m-auto text-blue-400 w-8 h-8 animate-pulse"></i>
        </div>
        <h3 class="text-xl font-medium mb-2" id="loading-status">Raspando dados do site...</h3>
        <p class="text-gray-500 animate-pulse-soft">Isso pode levar alguns segundos.</p>
    </div>

    <!-- Chat Interface Principal -->
    <div id="chat-interface" class="hidden fixed inset-0 z-40 p-4 md:p-8 flex items-center justify-center">
        <div class="glass w-full max-w-5xl h-full rounded-3xl overflow-hidden flex flex-col shadow-2xl">
            <!-- Header do Chat -->
            <div class="p-4 border-b border-white/10 flex items-center justify-between bg-white/5">
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-purple-600 flex items-center justify-center">
                        <i data-lucide="bot" class="text-white w-6 h-6"></i>
                    </div>
                    <div>
                        <h4 class="font-semibold text-sm">Agente Conversacional</h4>
                        <div class="flex items-center gap-1.5">
                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                            <span class="text-xs text-gray-400" id="active-url">site-analisado.com</span>
                        </div>
                    </div>
                </div>
                <button onclick="resetApp()" class="text-xs text-gray-400 hover:text-white flex items-center gap-1 border border-white/10 px-3 py-1.5 rounded-lg hover:bg-white/5 transition-all">
                    <i data-lucide="refresh-cw" class="w-3 h-3"></i> Novo Site
                </button>
            </div>

            <!-- Área de Mensagens -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-6 space-y-4 scrollbar-hide">
                <!-- Mensagem do Sistema -->
                <div class="flex justify-center my-4">
                    <span class="text-xs bg-blue-500/10 text-blue-400 px-3 py-1 rounded-full border border-blue-500/20">
                        O agente terminou de ler o conteúdo da URL
                    </span>
                </div>
                
                <!-- Mensagem IA -->
                <div class="flex gap-3 max-w-[80%]">
                    <div class="w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center">
                        <i data-lucide="bot" class="w-4 h-4"></i>
                    </div>
                    <div class="bg-white/10 p-4 rounded-2xl rounded-tl-none text-sm text-gray-200">
                        Olá! Eu processei o site com sucesso. Já entendo todo o contexto, serviços e informações disponíveis lá. Como posso te ajudar hoje?
                    </div>
                </div>
            </div>

            <!-- Input de Chat -->
            <div class="p-6 bg-white/5 border-t border-white/10">
                <div class="relative flex items-center">
                    <input type="text" id="chat-input" placeholder="Pergunte qualquer coisa sobre o site..." 
                        class="w-full bg-black/40 border border-gray-700 rounded-2xl py-4 px-6 pr-14 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                    <button onclick="sendMessage()" class="absolute right-3 p-2 bg-blue-600 hover:bg-blue-700 rounded-xl transition-colors">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializar ícones Lucide
        lucide.createIcons();

        const modal = document.getElementById('url-modal');
        const modalContainer = document.getElementById('modal-container');
        const loadingScreen = document.getElementById('loading-screen');
        const chatInterface = document.getElementById('chat-interface');
        const landingContent = document.getElementById('landing-content');
        const chatMessages = document.getElementById('chat-messages');

        function openModal() {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContainer.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeModal() {
            modalContainer.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function startScraping() {
            const url = document.getElementById('url-input').value;
            if (!url) {
                alert("Por favor, insira uma URL válida.");
                return;
            }

            document.getElementById('active-url').innerText = url;
            closeModal();
            
            // Simular início do processo
            setTimeout(() => {
                landingContent.classList.add('hidden');
                loadingScreen.classList.remove('hidden');
                
                // Simulação de etapas do backend
                const statuses = [
                    "Acessando servidor remoto...",
                    "Lendo estrutura HTML...",
                    "Extraindo conteúdo textual...",
                    "Treinando agente com contexto..."
                ];
                
                let i = 0;
                const statusInterval = setInterval(() => {
                    if (i < statuses.length) {
                        document.getElementById('loading-status').innerText = statuses[i];
                        i++;
                    } else {
                        clearInterval(statusInterval);
                        completeProcess();
                    }
                }, 1000);

            }, 400);
        }

        function completeProcess() {
            loadingScreen.classList.add('hidden');
            chatInterface.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                // Adicionar mensagem do usuário
                appendMessage('user', message);
                input.value = '';
                
                // Simular resposta da IA
                setTimeout(() => {
                    appendMessage('bot', "Esta é uma resposta simulada baseada nos dados que raspei do site. Como este é um protótipo apenas de frontend, eu não tenho acesso real ao backend no momento.");
                }, 1000);
            }
        }

        function appendMessage(sender, text) {
            const div = document.createElement('div');
            div.className = sender === 'user' 
                ? 'flex flex-row-reverse gap-3 max-w-[80%] ml-auto' 
                : 'flex gap-3 max-w-[80%]';
            
            const icon = sender === 'user' ? 'user' : 'bot';
            const bgColor = sender === 'user' ? 'bg-blue-600' : 'bg-white/10';
            const radius = sender === 'user' ? 'rounded-tr-none' : 'rounded-tl-none';

            div.innerHTML = `
                <div class="w-8 h-8 rounded-full ${sender === 'user' ? 'bg-blue-500' : 'bg-gray-700'} flex-shrink-0 flex items-center justify-center">
                    <i data-lucide="${icon}" class="w-4 h-4 text-white"></i>
                </div>
                <div class="${bgColor} p-4 rounded-2xl ${radius} text-sm text-gray-200 shadow-lg">
                    ${text}
                </div>
            `;
            
            chatMessages.appendChild(div);
            lucide.createIcons();
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function resetApp() {
            location.reload();
        }

        // Permitir envio com Enter
        document.getElementById('chat-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>